var E=e=>{var t;let r=e?e.match(/([0-9a-zA-Z\-]*)?(#[0-9a-zA-Z\-]*)?((.[0-9a-zA-Z\-]+)*)/):void 0,s=r?(t=r.slice(1,4))===null||t===void 0?void 0:t.map(i=>i?i.trim():void 0):Array(3).fill(void 0);return s&&s[1]&&(s[1]=s[1].replace(/#*/g,"")),r?{tag:s[0]||void 0,id:s[1]||void 0,classes:s[2]?s[2].split(".").filter(i=>i.trim()):void 0}:{}},b=(e,t={})=>{let{contents:r,c:s,misc:i,m:n,style:o,s:u,on:l,attrs:c,a:m,raw:_}=t;return r=r||s||"",r=_?r:v(r),e.innerHTML=r,Object.assign(e,i||n),Object.assign(e.style,o||u),Object.entries(l||{}).forEach(([d,h])=>e.addEventListener(d,h)),Object.entries(c||m||{}).forEach(([d,h])=>e.setAttribute(d,h)),e},y=(e,t={})=>{let{tag:r,id:s,classes:i}=E(e);r||(r="div");let n=document.createElement(r);return s&&(n.id=s),(i||[]).forEach(o=>n.classList.add(o)),b(n,t)},j=(e,t)=>{if(Object.keys(t).length!==1)throw new Error("Too many or too few positions specified.");let s=Object.values(t)[0],i="afterend";return t.after?i="afterend":t.before?i="beforebegin":t.atStartOf?i="afterbegin":t.atEndOf&&(i="beforeend"),s.insertAdjacentElement(i,e),e},g=class{constructor(e){this.value=null,this._subscribers={},this._subscriberCounts={},this._dead=!1,this.value=e}on(e,t,r=!1){return this._subscriberCounts[e]=this._subscriberCounts[e]||0,this._subscribers[e]=this._subscribers[e]||{},this._subscribers[e][this._subscriberCounts[e]]=t,r&&!["push","remove","mutation","setAt"].includes(e)&&t(this.value),this._subscriberCounts[e]++}unsubscribe(e,t){delete this._subscribers[e][t]}update(e){this._dead||(this.value=e,this._sendEvent("update",e))}refresh(){this._sendEvent("refresh",this.value)}_sendEvent(e,t){if(!this._dead){this._subscribers[e]=this._subscribers[e]||{};for(let r in Object.keys(this._subscribers[e]))this._subscribers[e][r](t)}}dispose(){this._dead=!0,this._subscribers={},this._subscriberCounts={}}},O=class extends g{constructor(e){super(e)}clear(){this.update([])}push(e){this.value.push(e),this._sendEvent("push",{value:e,idx:this.value.length-1})}remove(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this._sendEvent("remove",{value:this.value.splice(e,1)[0],idx:e})}get(e){if(e<0||e>this.value.length)throw new RangeError("Invalid index.");return this.value instanceof Array&&this.value[e]}setAt(e,t){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this.value[e]=t,this._sendEvent("mutation",{value:t,idx:e})}get length(){return this.value.length}},k=(e,t={})=>{let r=new RegExp("\\\\({{\\s*"+Object.keys(t).join("|")+"\\s*}})","gi");return new RegExp(Object.keys(t).join("|"),"gi"),e.replace(new RegExp("(^|[^\\\\]){{\\s*("+Object.keys(t).join("|")+")\\s*}}","gi"),function(s,i,n){return`${i||""}${t[n]}`}).replace(r,"$1")},p=(e,t={},r=!0)=>{let s=Object.assign({},t);return r&&(s=Object.fromEntries(Object.entries(s).map(([i,n])=>[i,v(n)]))),k(e,s)},w=(e,t)=>r=>p(e,r,t),v=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",A=e=>{if(!e)return"";let t=/&(?:amp|lt|gt|quot|#(0+)?39);/g,r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(t,s=>r[s]||"'")},a={Store:g,ListStore:O,nu:y,mustache:p,template:w,escape:v,unescape:A,extend:b,insert:j};var S={display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)",width:"100vw",height:"100vh",padding:0,margin:0,position:"fixed",top:0,left:0},f=()=>{var i;(i=document.querySelector("#alert-mask"))==null||i.remove();let e=a.insert(a.nu("div#alert-mask",{style:S,raw:!0,c:`<div id='cf-alert'>
        <div id='alert-header'></div>
        <div id='alert-body'></div>
        <div id='alert-footer'></div>
        </div>
        `}),{atEndOf:document.body}),t=e.querySelector("#alert-header"),r=e.querySelector("#alert-body"),s=e.querySelector("#alert-footer");return[t,r,s,e]};function x(e){let[t,r,s]=f();return new Promise((i,n)=>{try{t.innerHTML=a.escape(e)}catch(o){n(o)}})}function L(e,t="Info",r="OK"){let[s,i,n,o]=f();return new Promise((u,l)=>{try{s.innerHTML=a.escape(t),i.innerHTML=a.escape(e),a.insert(a.nu("button#alert-ok",{on:{click:c=>{u(),o.remove()}},c:r}),{atEndOf:n})}catch(c){l(c)}})}function q(){let[e,t,r]=f();return new Promise((s,i)=>{try{}catch(n){i(n)}})}var T={prompt:x,message:L,confirm:q};export{T as default};
