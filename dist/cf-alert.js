var _=e=>{var t;let r=e?e.match(/([0-9a-zA-Z\-]*)?(#[0-9a-zA-Z\-]*)?((.[0-9a-zA-Z\-]+)*)/):void 0,s=r?(t=r.slice(1,4))===null||t===void 0?void 0:t.map(n=>n?n.trim():void 0):Array(3).fill(void 0);return s&&s[1]&&(s[1]=s[1].replace(/#*/g,"")),r?{tag:s[0]||void 0,id:s[1]||void 0,classes:s[2]?s[2].split(".").filter(n=>n.trim()):void 0}:{}},g=(e,t={})=>{let{contents:r,c:s,misc:n,m:a,style:c,s:u,on:l,attrs:o,a:d,raw:E}=t;return r=r||s||"",r=E?r:v(r),e.innerHTML=r,Object.assign(e,n||a),Object.assign(e.style,c||u),Object.entries(l||{}).forEach(([h,f])=>e.addEventListener(h,f)),Object.entries(o||d||{}).forEach(([h,f])=>e.setAttribute(h,f)),e},y=(e,t={})=>{let{tag:r,id:s,classes:n}=_(e);r||(r="div");let a=document.createElement(r);return s&&(a.id=s),(n||[]).forEach(c=>a.classList.add(c)),g(a,t)},k=(e,t)=>{if(Object.keys(t).length!==1)throw new Error("Too many or too few positions specified.");let s=Object.values(t)[0],n="afterend";return t.after?n="afterend":t.before?n="beforebegin":t.atStartOf?n="afterbegin":t.atEndOf&&(n="beforeend"),s.insertAdjacentElement(n,e),e},p=class{constructor(e){this.value=null,this._subscribers={},this._subscriberCounts={},this._dead=!1,this.value=e}on(e,t,r=!1){return this._subscriberCounts[e]=this._subscriberCounts[e]||0,this._subscribers[e]=this._subscribers[e]||{},this._subscribers[e][this._subscriberCounts[e]]=t,r&&!["push","remove","mutation","setAt"].includes(e)&&t(this.value),this._subscriberCounts[e]++}unsubscribe(e,t){delete this._subscribers[e][t]}update(e){this._dead||(this.value=e,this._sendEvent("update",e))}refresh(){this._sendEvent("refresh",this.value)}_sendEvent(e,t){if(!this._dead){this._subscribers[e]=this._subscribers[e]||{};for(let r in Object.keys(this._subscribers[e]))this._subscribers[e][r](t)}}dispose(){this._dead=!0,this._subscribers={},this._subscriberCounts={}}},O=class extends p{constructor(e){super(e)}clear(){this.update([])}push(e){this.value.push(e),this._sendEvent("push",{value:e,idx:this.value.length-1})}remove(e){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this._sendEvent("remove",{value:this.value.splice(e,1)[0],idx:e})}get(e){if(e<0||e>this.value.length)throw new RangeError("Invalid index.");return this.value instanceof Array&&this.value[e]}setAt(e,t){if(e<0||e>=this.value.length)throw new RangeError("Invalid index.");this.value[e]=t,this._sendEvent("mutation",{value:t,idx:e})}get length(){return this.value.length}},j=(e,t={})=>{let r=new RegExp("\\\\({{\\s*"+Object.keys(t).join("|")+"\\s*}})","gi");return new RegExp(Object.keys(t).join("|"),"gi"),e.replace(new RegExp("(^|[^\\\\]){{\\s*("+Object.keys(t).join("|")+")\\s*}}","gi"),function(s,n,a){return`${n||""}${t[a]}`}).replace(r,"$1")},m=(e,t={},r=!0)=>{let s=Object.assign({},t);return r&&(s=Object.fromEntries(Object.entries(s).map(([n,a])=>[n,v(a)]))),j(e,s)},w=(e,t)=>r=>m(e,r,t),v=e=>e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):"",C=e=>{if(!e)return"";let t=/&(?:amp|lt|gt|quot|#(0+)?39);/g,r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};return e.replace(t,s=>r[s]||"'")},i={Store:p,ListStore:O,nu:y,mustache:m,template:w,escape:v,unescape:C,extend:g,insert:k};var A={display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.6)",width:"100vw",height:"100vh",padding:0,margin:0,position:"fixed",top:0,left:0},b=()=>{var n;(n=document.querySelector("#alert-mask"))==null||n.remove();let e=i.insert(i.nu("div#alert-mask",{style:A,raw:!0,c:`<div id='cf-alert'>
        <div id='alert-header'></div>
        <div id='alert-body'></div>
        <div id='alert-footer'></div>
        </div>
        `}),{atEndOf:document.body}),t=e.querySelector("#alert-header"),r=e.querySelector("#alert-body"),s=e.querySelector("#alert-footer");return[t,r,s,e]};function S(e,t="Info",r="OK"){let[s,n,a,c]=b();return new Promise((u,l)=>{try{s.innerHTML=i.escape(t),n.innerHTML=i.escape(e),i.insert(i.nu("button#alert-ok",{on:{click:o=>{u(),c.remove()}},c:r}),{atEndOf:a})}catch(o){l(o)}})}function T(e,t,r="Input"){let[s,n,a,c]=b();return new Promise((u,l)=>{try{s.innerHTML=i.escape(r),n.innerHTML=i.escape(t);let o=i.insert(i.nu("input#alert-input",{attrs:{type:e}}),{atEndOf:n});i.insert(i.nu("button#alert-cancel",{on:{click:d=>{l("Cancelled by user"),c.remove()}},c:"Cancel"}),{atEndOf:a}),i.insert(i.nu("button#alert-ok",{on:{click:d=>{u(o.value),c.remove()}},c:"Submit"}),{atEndOf:a})}catch(o){l(o)}})}function H(e,t,r="Are you sure?"){let[s,n,a,c]=b();return new Promise((u,l)=>{try{s.innerHTML=i.escape(r),n.innerHTML=i.escape(e),i.insert(i.nu("button#alert-cancel",{on:{click:o=>{u(!1),c.remove()}},c:(t==null?void 0:t.no)||"No"}),{atEndOf:a}),i.insert(i.nu("button#alert-ok",{on:{click:o=>{u(!0),c.remove()}},c:(t==null?void 0:t.yes)||"Yes"}),{atEndOf:a})}catch(o){l(o)}})}var q={input:T,message:S,confirm:H};export{q as default};
